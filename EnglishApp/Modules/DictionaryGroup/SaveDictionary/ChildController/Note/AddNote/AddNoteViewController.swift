//
//  AddNoteViewController.swift
//  EnglishApp
//
//  Created vinova on 5/17/19.
//  Copyright © 2019 demo. All rights reserved.
//
//  Template generated by Juanpe Catalán @JuanpeCMiOS
//

import UIKit

protocol AddNoteDelegate: class {
    func addNoteSuccessed()
}

class AddNoteViewController: BaseViewController {

    @IBOutlet weak var tvNote: UITextView!
    var presenter: AddNotePresenterProtocol?
    weak var deleagate: AddNoteDelegate?

    override func setUpViews() {
        super.setUpViews()
    }
    
    override func viewDidAppear(_ animated: Bool) {
        tvNote.becomeFirstResponder()
    }
    
    override func setUpNavigation() {
        super.setUpNavigation()
        addBackToNavigation()
        setTitleNavigation(title: LocalizableKey.writeNote.showLanguage)
        addButtonTextToNavigation(title: "\(LocalizableKey.done.showLanguage)", style: .right, action: #selector(clickFinish), textColor: .black,font: AppFont.fontBold16)
    }
    
    @objc func clickFinish(){
        let content = tvNote.text ?? ""
        if content.trimmingCharacters(in: CharacterSet.whitespacesAndNewlines) != "" {
            self.presenter?.addNote(description: content)
        } else {
            self.view.endEditing(true)
            PopUpHelper.shared.showError(message: " Vui lòng nhập ghi chú của bạn.") { [unowned self] in
                self.tvNote.becomeFirstResponder()
            }
        }
    }
}
extension AddNoteViewController : AddNoteViewProtocol{
    func addNoteSuccessed() {
        deleagate?.addNoteSuccessed()
        self.pop(animated: true)
    }
}
